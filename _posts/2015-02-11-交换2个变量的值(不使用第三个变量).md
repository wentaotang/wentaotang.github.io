---
layout: post
title: 交换2个变量不使用第三个变量
categories:
- 随笔
tags:
- 随笔
---


这个问题曾多次出现在面试题上，今天我们来看看这个问题，还是有点意思的。

一般我们首次看到这个问题，通常的思维就是用第三个变量来周转一下，但是题目明确的说明不允许使用第三个变量，既然是这样的话，那么就只能用这2个变量来周转了。

假设这2个变量是  a=3,b=5  

```java
a=a+b;
b=a-b;  --> (a+b)-b=a;
a=a-b;  --> (a+b)-a=b;  
```

这个方法很好理解，那么还有其他的解决办法吗？答案是肯定的，我们来看看Java给我们提供的位运算操作符

```java
a=a^b;
b=a^b;
a=a^b;
```

如果我们对这个按位异或操作符不是很熟的话，我们先来看看什么叫按位异或：针对二进制而言，只要两个操作数的某一位不相同时候结果的该位就为1，怎么理解呢，我们来看一下例子：a=3 b=5,转换成2进制就是a=0011,b=0101

A  0 0 1 1  

B  0 1 0 1  执行完按位异或之后应该就是 0110，这就是按位异或操作。

那么继续回到我们上面的问题，我把10进制的a,b都转换成2进制。

a  0 0 1 1  

b  0 1 0 1

```java
a=a^b;     
        0 0 1 1  
    a = 0 1 0 1= 0 1 1 0
b=a^b;  
        0 1 1 0  
    b = 0 1 0 1= 0 0 1 1

a=a^b;  
        0 1 1 0  
    a = 0 0 1 1= 0 1 0 1  
```

看完之后，是不是容易理解些了，想到这些，是不是和高中数学中的计算问题时，也需要我们构造一些因子，进行抵消，然后快速得到结果。

我们也可以这么来理解

```java
a=a^b;   
b=a^b;   ---> b=a^b^b 这里2个b进行异或操作， 其实就已经抵消了，等价于b=a;
a=a^b;   ---> a=a^b^a 同上，该表达式等价于a=b;
```


其实当时我看到这个问题的时候也只能想到第一种，为啥我想不到第二种呢，我觉得其一，平时很少用到Java的按位操作，也很少去想Java的按位操作的应用场景。
其二就是对这些东西的理解比较浅，仅限于表面，没有深入的理解Java的按位操作，导致不能灵活的运用Java给我们提供的这些工具。

另外还有一个值得注意的问题，就是在用Java做乘除运算的时候，如果乘数或除数是2的N次方的话，我们最好使用Java提供的移位操作符，效率更高。


     